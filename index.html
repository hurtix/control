<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Panadería</title>
</head>
<body>
  <div style="text-align: center; margin-top: 5em;">
    <h1>Control de Panadería</h1>
    <p>Verificando sesión...</p>
  </div>

  <script>
    // Verificar si hay sesión activa
    async function checkAndRedirect() {
      try {
        const response = await fetch('/session');
        if (response.ok) {
          const result = await response.json();
          if (result.authenticated) {
            // Usuario ya logueado, ir al dashboard
            window.location.href = '/dashboard.html';
            return;
          }
        }
      } catch (error) {
        console.log('No hay sesión activa');
      }
      
      // No hay sesión activa, ir al login
      window.location.href = '/login.html';
    }
    
    // Ejecutar verificación inmediatamente
    checkAndRedirect();
  </script>
</body>
</html>